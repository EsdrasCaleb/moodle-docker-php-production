[www]
; Mantemos dynamic para liberar RAM quando o movimento cair
pm = dynamic

; O TETO (Crucial): Aqui você diz o máximo que ele pode chegar.
; Cálculo seguro: (Total RAM Docker - 500MB sistema) / 100MB
; Exemplo: Se tem 8GB RAM -> (8000 - 500) / 100 = 75
pm.max_children = 75

; INÍCIO: Quantos processos já começam ligados (para não engasgar no boot)
pm.start_servers = 10

; MÍNIMO EM ESPERA: Garante que sempre tenha gente livre para atender
; Se baixar disso, ele cria mais processos.
pm.min_spare_servers = 5

; MÁXIMO EM ESPERA: Se tiver muita gente à toa (ex: depois de uma prova),
; ele mata os processos para devolver RAM pro sistema.
pm.max_spare_servers = 20

; Limite de requisições para evitar memory leaks do Moodle
pm.max_requests = 1000

; Logs
catch_workers_output = yes